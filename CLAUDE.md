# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Aurora Coinly Web is a personal finance management SPA built with **Angular 19** (standalone components), **PrimeNG 19** for UI components, and **Tailwind CSS v4** with the `tailwindcss-primeui` plugin for styling. It uses **Karma/Jasmine** for testing.

## Commands

- **Dev server with proxy:** `npm run start:dev` (opens browser, proxies API to Azure backend)
- **Dev server:** `npm start`
- **Build:** `npm run build`
- **Tests:** `npm test`

## Architecture

### Path Aliases (tsconfig.json)
- `@core/*` → `src/app/core/*`
- `@features/*` → `src/app/features/*`
- `@shared/*` → `src/app/shared/*`

### Folder Structure
- **`core/`** — Singleton services, guards, interceptors (auth infrastructure)
  - `guards/` — `privateGuard` (requires auth), `publicGuard` (auth redirects away)
  - `interceptors/` — `authInterceptor` with automatic token refresh using `checkToken()` HttpContext
  - `services/` — `TokenService` (cookie-based JWT storage via `typescript-cookie`), `ErrorsService`
- **`features/`** — Feature modules: `auth`, `categories`, `dashboard`, `methods`, `reports`, `settings`, `transactions`, `wallets`, `profile`. Each follows the pattern: `components/`, `models/`, `pages/`, `services/`
- **`shared/`** — `layout/` (MainLayout, AuthLayout, Navbar, Sidebar), `components/`, `models/`, `utils/`

### Key Patterns
- **All components are standalone** — no NgModules for components. `SharedModule` only re-exports `CommonModule` and `RouterModule`.
- **Lazy loading** — all routes use `loadComponent()` for code splitting.
- **Auth flow** — Token-based auth with access/refresh tokens stored in cookies. The `authInterceptor` is opt-in: requests must include `checkToken()` context to attach the Bearer token.
- **PrimeNG theming** — Custom preset defined in `src/app/mypreset.ts`, configured with `providePrimeNG()` in `app.config.ts`. Dark mode is disabled.
- **Custom colors** — Defined as CSS custom properties in `src/styles.css` under `@theme` using oklch (e.g., `--color-coinly-primary`, `--color-coinly-secondary`, etc.).
- **API proxy** — Dev server proxies `/aurora/coinly` to the Azure-hosted backend (`proxy.conf.json`).
- **Schematics config** — `angular.json` has `skipTests: true` for all schematics (no spec files generated by default).
- **Strict TypeScript** — `strict: true` with additional strict Angular compiler options (`strictTemplates`, `strictInjectionParameters`).
